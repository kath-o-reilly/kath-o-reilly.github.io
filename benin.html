<!DOCTYPE html>
<html lang="en">
<head>
  <title>Benin</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- updated to local style sheet -->
  <link rel="stylesheet" type="text/css" href="bootstrap.min.css"> 
  <!-- scripts that code is reliant on -->
  <script src='//d3js.org/d3.v3.min.js' charset="utf-8"></script>
  <script src='js/crossfilter/crossfilter.js' type='text/javascript'></script>
  <script src='js/dc/dc.js' type='text/javascript'></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
 
</head>
<body class>
  
<!-- add in navbar that it consistent with mainpage -->  
<div class="navbar navbar-default navbar-fixed-top">
	<div class="container">
		<div class="navbar-header">
		  	<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		    		<span class="sr-only">Toggle navigation</span>
		    		<span class="icon-bar"></span>
		    		<span class="icon-bar"></span>
		    		<span class="icon-bar"></span>
		  	</button>
		  	<a class="navbar-brand" href="#">Vaccine Epidemiology</a>
		</div>
	        <div class="navbar-collapse collapse">
	          	<ul class="nav navbar-nav navbar-right">
	            		<li><a href="http://kath-o-reilly.github.io/">Main page</a></li>
	            		<li><a href="#">Option 2</a></li>
	            		<li><a href="#">Option 3</a></li>
	            		<li><a href="#">Help (br)</a></li>
	          	</ul>
	          	<form class="navbar-form navbar-right">
	            		<input type="text" class="form-control" placeholder="Search (br)...">
	          	</form>
	        </div>
        </div>
</div>

<!-- whole page needs to be in a container -->
<div class="container">
	<div class="page-header" id="banner">
		<div class="row">
			<div class="col-lg-12">
				<h2>Benin DHS survey 2001</h2>
		  		<p>Estimates of DPT vaccination. </p>     
			</div>
		</div>
	</div>
	<div class="bs-docs-section">
		<div class="row">
    			<div class="col-md-6">
      				<a href="pulpitrock.jpg" class="thumbnail">
        				<p>Vaccination coverage</p>    
        				<img src="images/Benin2001_dpt_spatial_name.png" alt="coverage" style="width:200px;height:200px">
      				</a>
    			</div> <!-- first item -->
    			<div class="col-md-6">
      				<a href="images/Benin2001_dpt_spatial_num.png" class="thumbnail">
        				<p>Numbers unvaccinated</p>
        				<img src="images/Benin2001_dpt_spatial_num.png" alt="unvaccinated" style="width:200px;height:200px">
      				</a>
    			</div> <!-- second item  -->
  		</div> <!-- row -->	
	</div>  <!-- doc section -->
	<div class="bs-docs-section"> <!-- section for table -->
		<div class="row">
			<div class="span12">
				<div class="table table-hover" id="cov-table">
					<thead>
						<tr class="header">
							<th>Intervention</th>
							<th>Coverage</th>
							<th>Expected gains</th>
						</tr>
					</thead>
				</div> 
			</div>
		</div>
	</div>
</div>

<!-- script for loading in data into the table above -->
<script>
	// load csv using d3
	d3.csv("images/Benin2001_DPT_inter_results.csv", function(data){

		// format data such as rounding
		data.forEach(function(d){
			d.coverage = +d.vacc;
			d.nunv.mean = +d.nunv;	
		});
		// create table and link to div
		var dataTable = dc.dataTable("#cov-table");
		// Run the data through crossfilter and load our 'facts'
	  	var facts = crossfilter(data);
	  	// Create dataTable dimension
	  	var intDimension = facts.dimension(function (d) {
	    		return d.variable;
	  	});
	  	// Table of data
	  	dataTable.width(960).height(800)
	    	.dimension(intDimension)
	    	.group(function(d) { return " "})
	    	.size(10)
	    	.columns([
		 function(d) { return d.variable; },
		 function(d) { return d.coverage; },
		 function(d) { return d.nunv; }
		 ])
	    	.sortBy(function(d){ return d.coverage; })
	    	.order(d3.descending);
		// Render
		dc.renderAll();
	});
</script>

 
<footer>
        <div class="row">
        	<div class="col-lg-12">
            		<ul class="list-unstyled">
              			<li class="pull-right"><a href="#top">Back to top</a></li>
              			<li><a href="http://news.bootswatch.com" onclick="pageTracker._link(this.href); return false;">Blog</a></li>
              			<li><a href="http://feeds.feedburner.com/bootswatch">RSS</a></li>
              			<li><a href="https://twitter.com/bootswatch">Twitter</a></li>
              			<li><a href="https://github.com/thomaspark/bootswatch/">GitHub</a></li>
              			<li><a href="../help/#api">API</a></li>
              			<li><a href="../help/#support">Support</a></li>
            		</ul>
            		<p>Vaccine Epidemiology Info here. Contact <a href="mailto:k.oreilly@imperial.ac.uk">Kath O'Reilly</a>.</p>
            		 <p>Based on <a href="http://getbootstrap.com" rel="nofollow">Bootstrap</a>. Icons from <a href="http://fortawesome.github.io/Font-Awesome/" rel="nofollow">Font Awesome</a>. Web fonts from <a href="http://www.google.com/webfonts" rel="nofollow">Google</a>.</p>
        	</div>
	</div>
</footer>

</body>
</html>
