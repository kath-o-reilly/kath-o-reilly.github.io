<!DOCTYPE html>
<html lang="en">
<head>
  <title>Benin</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- updated to local style sheet -->
  <link rel="stylesheet" type="text/css" href="js/css/bootstrap.min.css"> 
  <!-- scripts that code is reliant on -->
  <script src='js/d3/d3.min.js' charset="utf-8"></script>
  <script src='js/crossfilter/crossfilter.js' type='text/javascript'></script>
  <script src='js/dc/dc.js' type='text/javascript'></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
 
</head>
<body class>
  
<!-- add in navbar that it consistent with mainpage -->  
<div class="navbar navbar-default navbar-fixed-top">
	<div class="container">
		<div class="navbar-header">
		  	<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		    		<span class="sr-only">Toggle navigation</span>
		    		<span class="icon-bar"></span>
		    		<span class="icon-bar"></span>
		    		<span class="icon-bar"></span>
		  	</button>
		  	<a class="navbar-brand" href="#">Vaccine Epidemiology</a>
		</div>
	        <div class="navbar-collapse collapse">
	          	<ul class="nav navbar-nav navbar-right">
	            		<li><a href="http://kath-o-reilly.github.io/">Main page</a></li>
	            		<li><a href="#">Option 2</a></li>
	            		<li><a href="#">Option 3</a></li>
	            		<li><a href="#">Help (br)</a></li>
	          	</ul>
	          	<form class="navbar-form navbar-right">
	            		<input type="text" class="form-control" placeholder="Search (br)...">
	          	</form>
	        </div>
        </div>
</div>

<!-- whole page needs to be in a container -->
<div class="container">
	<div class="page-header" id="banner">
		<div class="row">
			<div class="col-lg-12">
				<h2>Benin DHS survey 2001</h2>
		  		<p>Estimates of DPT vaccination. </p>     
			</div>
		</div>
	</div>
	<div class="bs-docs-section">
		<div class="row">
			<div class="col-sm-4">
				<a href="images/Benin2001_dpt_spatial_num.png" class="thumbnail">
    				<p>Vaccination coverage</p>    
    				<img src="images/Benin2001_dpt_spatial_name.png" alt="coverage" style="width:200px;height:500px">
				</a>
			</div> <!-- first item -->
			<div class="col-sm-4"> <!-- second item -->
  				<a href="images/Benin2001_dpt_spatial_num.png" class="thumbnail">
    				<p>Numbers unvaccinated</p>
    				<img src="images/Benin2001_dpt_spatial_num.png" alt="unvaccinated" style="width:200px;height:500px">
  				</a>
			</div> <!-- second item  -->
			<div class="col-sm-4" id="chart1"> <!-- third item -->

			</div> <!-- third item  -->
		</div> <!-- row -->	
	</div>  <!-- doc section -->
	<div class="bs-docs-section"> <!-- section for pie chart -->
		<div class="row">
			<div class="col-md-8">
				<div class="bs-component">
					<p>Based on the most recent DHS data the estimated average coverage for the entrie population is: </p> 	
					<p>Pie chart will go here...</p>
					<p>Interventions are based on an analysis of factors that are associated with DPT immunisation. Removing the inequities of each risk factor results in an expected improvement in coverage. </p>
				</div>
			</div>	
		</div>
	</div>
	<div class="bs-docs-section"> <!-- section for table -->
		<div class="row">
			<div class="col-md-8">
				<div class="bs-component">
					<div class="table tale-striped table-hover" id="cov-table">

					</div> 
				</div>
			</div>
		</div>
	</div>
</div>

<!-- script for loading in data into the table above 
<script>
	// load csv using d3
	d3.csv("images/Benin2001_DPT_inter_results.csv", function(data){
		// create table and link to div
        console.log(data);
	}); // end of table
	
</script> -->

<script>
// other things
var margin = {top: 20, right: 20, bottom: 70, left: 40},
    width = 600 - margin.left - margin.right,
    height = 300 - margin.top - margin.bottom;
// Parse the date / time
var	parseDate = d3.time.format("%Y-%m").parse;
var x = d3.scale.ordinal().rangeRoundBands([0, width], .05);
var y = d3.scale.linear().range([height, 0]);
var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .tickFormat(d3.time.format("%Y-%m"));
var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .ticks(10);
var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", 
          "translate(" + margin.left + "," + margin.top + ")");

  // Get the data
d3.csv("images/dpt3_annual_estimates_WHO_T.csv", function(error, data) {
      data.forEach(function(d) {
 	d.Year = +d.Year;  // iterate of the data array to convert to a number
 	d.Benin = +d.Benin;
      }); // forEach
      //console.log(data[0]);
      //}); // d3.csv
  x.domain(data.map(function(d) { return d.Year; }));
  y.domain([0, d3.max(data, function(d) { return d.Benin; })]);
  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
    .selectAll("text")
      .style("text-anchor", "end")
      .attr("dx", "-.8em")
      .attr("dy", "-.55em")
      .attr("transform", "rotate(-90)" );
  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Value ($)");
  svg.selectAll("bar")
      .data(data)
    .enter().append("rect")
      .style("fill", "steelblue")
      .attr("x", function(d) { return x(d.date); })
      .attr("width", x.rangeBand())
      .attr("y", function(d) { return y(d.value); })
      .attr("height", function(d) { return height - y(d.value); });
      
	});// d3.csv
 
</script>

 
<footer>
        <div class="row">
        	<div class="col-lg-12">
            		<ul class="list-unstyled">
              			<li class="pull-right"><a href="#top">Back to top</a></li>
              			<li><a href="http://news.bootswatch.com" onclick="pageTracker._link(this.href); return false;">Blog</a></li>
              			<li><a href="http://feeds.feedburner.com/bootswatch">RSS</a></li>
              			<li><a href="https://twitter.com/bootswatch">Twitter</a></li>
              			<li><a href="https://github.com/thomaspark/bootswatch/">GitHub</a></li>
              			<li><a href="../help/#api">API</a></li>
              			<li><a href="../help/#support">Support</a></li>
            		</ul>
            		<p>Vaccine Epidemiology Info here. Contact <a href="mailto:k.oreilly@imperial.ac.uk">Kath O'Reilly</a>.</p>
            		 <p>Based on <a href="http://getbootstrap.com" rel="nofollow">Bootstrap</a>. Icons from <a href="http://fortawesome.github.io/Font-Awesome/" rel="nofollow">Font Awesome</a>. Web fonts from <a href="http://www.google.com/webfonts" rel="nofollow">Google</a>.</p>
        	</div>
	</div>
</footer>

</body>
</html>
